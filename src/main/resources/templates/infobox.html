<!--

    Skill Circuits
    Copyright (C) 2022 - Delft University of Technology

    This program is free software: you can redistribute it and/or modify
    it under the terms of the GNU Affero General Public License as
    published by the Free Software Foundation, either version 3 of the
    License, or (at your option) any later version.

    This program is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU Affero General Public License for more details.

    You should have received a copy of the GNU Affero General Public License
    along with this program.  If not, see <https://www.gnu.org/licenses/>.

-->
<!DOCTYPE html>
<html
    lang="en"
    xmlns:th="http://www.thymeleaf.org"
    xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout">
    <div th:fragment="infobox" th:if="${studentAndAuthenticated}">
        <div id="info-box">
            <div id="info-text" th:style="${collapsed} ? 'display: none' : 'display: flex'">
                <a
                    class="larger-info"
                    th:if="${completedSomeTask}"
                    th:href="@{|/module/${moduleId}#block-${skillId}-name|}"
                    th:text="'Last worked on: ' + ${latestTask.getName()}"></a>
                <a
                    class="smaller-info"
                    th:if="${completedSomeTask}"
                    th:href="@{|/module/${moduleId}#block-${skillId}-name|}"
                    th:text="'In ' + ${locationString}"></a>
                <span class="default-info" th:unless="${completedSomeTask}">
                    After you complete a task, it will appear here!
                </span>
            </div>
            <div id="icons">
                <i id="map-icon" class="fa-solid fa-map-location-dot"></i>
                <i
                    id="arrow-icon"
                    th:class="${collapsed} ? 'fa-solid fa-angle-right' : 'fa-solid fa-angle-left'"></i>
            </div>
        </div>
        <script>
            $(document).ready(function () {
                const rightArrowClass = "fa-angle-right";
                const leftArrowClass = "fa-angle-left";
                const infoText = $("#info-text");
                const arrow = $("#arrow-icon");

                let collapseOrExpand = () => {
                    if (infoText.css("display") === "flex") {
                        infoText.css("display", "none");
                        arrow.removeClass(leftArrowClass);
                        arrow.addClass(rightArrowClass);
                    } else {
                        infoText.css("display", "flex");
                        arrow.removeClass(rightArrowClass);
                        arrow.addClass(leftArrowClass);
                    }
                };

                arrow.click(collapseOrExpand);
            });
        </script>
    </div>
</html>
