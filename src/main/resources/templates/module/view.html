<!--

    Skill Circuits
    Copyright (C) 2022 - Delft University of Technology

    This program is free software: you can redistribute it and/or modify
    it under the terms of the GNU Affero General Public License as
    published by the Free Software Foundation, either version 3 of the
    License, or (at your option) any later version.

    This program is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU Affero General Public License for more details.

    You should have received a copy of the GNU Affero General Public License
    along with this program.  If not, see <https://www.gnu.org/licenses/>.

-->
<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{container}">

<head>
    <link rel="stylesheet" th:href="@{/css/circuit.css}">

    <style th:inline="css">
        /*<![CDATA[*/
        :root {
            --columns: /*[[${columns}]]*/ 5;
        }
        /*]]>*/
    </style>

    <title th:text="${module.name}"></title>
</head>

<body>

<div layout:fragment="content">
    <th:block th:with="circuit = ${module},
                       canCreate = ${@authorisationService.canCreateSkillInEdition(module.edition.id)},
                       canEdit = ${@authorisationService.canEditSkillInEdition(module.edition.id)},
                       canDelete = ${@authorisationService.canDeleteSkillInEdition(module.edition.id)},
                       groupType = ${'submodule'},
                       blockType = ${'skill'},
                       itemType = ${'task'}">
        <div layout:replace="~{circuit/view :: grid}"></div>
        <div layout:replace="~{circuit/view :: additional}"></div>
    </th:block>

    <div layout:replace="~{task/create :: form}"></div>

    <th:block th:with="circuit = ${module},
                       canCreate = ${@authorisationService.canCreateSkillInEdition(module.edition.id)},
                       canEdit = ${@authorisationService.canEditSkillInEdition(module.edition.id)},
                       canDelete = ${@authorisationService.canDeleteSkillInEdition(module.edition.id)},
                       groupType = ${'submodule'},
                       blockType = ${'skill'},
                       itemType = ${'task'}">
        <script>
            const blockType = "skill";
            const itemType = "task";
        </script>
        <div layout:replace="~{circuit/view :: script}"></div>
    </th:block>

    <div layout:replace="~{task/create :: script}"></div>
    <div layout:replace="~{task/mark :: script}"></div>

</div>

</body>
</html>