<!--

    Skill Circuits
    Copyright (C) 2022 - Delft University of Technology

    This program is free software: you can redistribute it and/or modify
    it under the terms of the GNU Affero General Public License as
    published by the Free Software Foundation, either version 3 of the
    License, or (at your option) any later version.

    This program is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU Affero General Public License for more details.

    You should have received a copy of the GNU Affero General Public License
    along with this program.  If not, see <https://www.gnu.org/licenses/>.

-->
<!DOCTYPE html>
<html
    lang="en"
    xmlns:th="http://www.thymeleaf.org"
    xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout">
    <div layout:fragment="playlist" id="playlist">
        <h1>Playlist name</h1>
        <h3>
            <span class="fa-solid fa-clock"></span>
            <span>Total time</span>
            <span style="font-style: italic; font-size: 80%">paused</span>
        </h3>
        <div class="opt-in__button-container">
            <button>
                <span class="fa-solid fa-play-circle"></span>
            </button>
            <button>
                <span class="fa-solid fa-pause-circle"></span>
            </button>
            <button>
                <span class="fa-solid fa-trash-can"></span>
            </button>
        </div>
        <h2>
            <span class="fa-solid fa-road"></span>
            <span
                th:text="${@playlistService.getDefaultPathForEdition(@authorisationService.getAuthPerson().getId())}"></span>
        </h2>
        <h3>
            <span class="fa-solid fa-music"></span>
            <span>Time played</span>
        </h3>
        <ul class="playlist-items">
            <th:block
                th:with="items =  ${@playlistService.getSkills(@authorisationService.getAuthPerson().getId(), 13)}">
                <li th:each="skill : ${items.entrySet()}">
                    <span class="fa-solid circle"></span>
                    <span
                        style="font-weight: bold"
                        th:text="${skill.getKey().getName()} + ': '"></span>
                    <span
                        style="font-style: italic"
                        th:text="${skill.getKey().getTotalTime()} + ' minutes remaining'"></span>
                    <ul class="playlist-items">
                        <li th:each="task : ${skill.getValue().entrySet()}">
                            <a
                                th:href="@{'/module/' + ${task.getValue().get(0)} +
                                        '#block-' + ${skill.getKey().getId()}}">
                                <span class="fa-solid fa-square"></span>
                                <!--Strikethrough the text if the task has already been done -->
                                <span
                                    th:style="${task.getValue().get(1) == 1? 'text-decoration: line-through;' : ''}"
                                    th:text="${@playlistService.getTaskName(task.getKey())}"></span>
                                <!-- TODO: Add playing or something -->
                            </a>
                        </li>
                    </ul>
                </li>
                <li><span>=========</span></li>
                <li>
                    <span class="fa-solid fa-bullseye"></span>
                    <span th:text="'Checkpoint: Lecture 1'"></span>
                </li>
            </th:block>
        </ul>
        <div class="opt-in__button-container">
            <button id="playlist-button-m">Opt out</button>
        </div>
    </div>
    <script></script>
</html>
