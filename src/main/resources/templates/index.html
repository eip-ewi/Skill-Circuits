<!--

    Skill Circuits
    Copyright (C) 2022 - Delft University of Technology

    This program is free software: you can redistribute it and/or modify
    it under the terms of the GNU Affero General Public License as
    published by the Free Software Foundation, either version 3 of the
    License, or (at your option) any later version.

    This program is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU Affero General Public License for more details.

    You should have received a copy of the GNU Affero General Public License
    along with this program.  If not, see <https://www.gnu.org/licenses/>.

-->
<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{container}">
<head>
    <link rel="stylesheet" th:href="@{/css/blocks.css}">

    <title>Skill Circuits</title>
</head>

<body>

<div layout:fragment="content">

    <h1>Welcome to Skill Circuits</h1>

    <h2>Courses</h2>

    <div class="blocks">
        <th:block  th:each="course : ${courses}">

            <th:block th:if="not${@authorisationService.isAuthenticated()}">
                <a class="block" th:href="@{|/edition/${@courseService.getLastEditionForCourse(course.id)}|}">
                    <h2 th:text="${course.name}"></h2>
                </a>
            </th:block>

            <th:block th:if="${@authorisationService.isAuthenticated()} and not ${@authorisationService.canViewAllEditions(course.id)}">
                <a class="block" th:href="@{|/edition/${@courseService.getLastStudentEditionForCourseOrLast(course.id)}|}">
                    <h2 th:text="${course.name}"></h2>
                </a>
            </th:block>

            <th:block th:if="${@authorisationService.canViewAllEditions(course.id)}">
                <a class="block" th:href="@{|/course/${course.id}|}">
                    <h2 th:text="${course.name}"></h2>
                </a>
            </th:block>

        </th:block>

    </div>

    <br>

    <h2>Modules</h2>



    <ul>
        <li th:each="moduleId : ${moduleIds}"><a th:href="@{|/module/${moduleId}|}" th:text="${moduleNames.get(moduleId)}"></a></li>
    </ul>

</div>

</body>
</html>